一般来讲，一个主流消息队列的设计范式里，
应该是不丢消息的前提下，尽量减少重复消息，不保证消息的投递顺序


如何鉴别消息重复，并幂等的处理重复消息。
一个消息队列如何尽量减少重复消息的投递。

broker记录MessageId，直到投递成功后清除，重复的ID到来不做处理，
这样只要发送者在清除周期内能够感知到消息投递成功，就基本不会在server端产生重复消息。

对于server投递到consumer的消息，由于不确定对端是在处理过程中还是消息发送丢失的情况下，
有必要记录下投递的IP地址。决定重发之前询问这个IP，消息处理成功了吗？如果询问无果，再重发

## 消息丢失

## 消息重复消费

    本地消息表 对账

## 消息至少一次投递



可靠投递，事务特性，性能优化

## rpc
    负载均衡
    服务发现
    通信协议
    序列化协议
    
## 转储
    错峰/流控/最终可达
    
    
    
## kafka
    Topic/Partition/ConsumerGroup